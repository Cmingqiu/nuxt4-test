// ================================
// ğŸ”§ SCSS æ··å…¥å·¥å…·é›†
// ================================

@use 'sass:map';
@use 'sass:color';
@use 'variables' as *;

// å“åº”å¼æ–­ç‚¹æ··å…¥
@mixin respond-to($breakpoint) {
  $value: map.get($breakpoints, $breakpoint);
  @if $value != null {
    @media (min-width: $value) {
      @content;
    }
  } @else {
    @warn "Breakpoint `#{$breakpoint}` not found.";
  }
}

// æœ€å¤§å®½åº¦æ–­ç‚¹
@mixin respond-below($breakpoint) {
  $value: map.get($breakpoints, $breakpoint);
  @if $value != null {
    @media (max-width: ($value - 1px)) {
      @content;
    }
  }
}

// ä»…ç§»åŠ¨ç«¯
@mixin mobile-only {
  @media (max-width: 767px) {
    @content;
  }
}

// ä»…å¹³æ¿
@mixin tablet-only {
  @media (min-width: 768px) and (max-width: 991px) {
    @content;
  }
}

// ä»…æ¡Œé¢
@mixin desktop-only {
  @media (min-width: 992px) {
    @content;
  }
}

// Flexbox å¸ƒå±€
@mixin flex(
  $direction: row,
  $justify: flex-start,
  $align: stretch,
  $wrap: nowrap
) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
  flex-wrap: $wrap;
}

@mixin flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

@mixin flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

// Grid å¸ƒå±€
@mixin grid($columns: 1, $gap: 1rem) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

@mixin grid-auto-fit($min-width: 280px, $gap: 1rem) {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax($min-width, 1fr));
  gap: $gap;
}

// æ–‡å­—æˆªæ–­
@mixin text-truncate($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// ç»ç’ƒæ‹Ÿæ€æ•ˆæœ
@mixin glass($blur: 20px, $opacity: 0.1) {
  background: rgba(255, 255, 255, $opacity);
  backdrop-filter: blur($blur);
  -webkit-backdrop-filter: blur($blur);
}

@mixin glass-dark($blur: 20px, $opacity: 0.3) {
  background: rgba(10, 10, 15, $opacity);
  backdrop-filter: blur($blur);
  -webkit-backdrop-filter: blur($blur);
}

// æ¸å˜æ–‡å­—
@mixin gradient-text($gradient) {
  background: $gradient;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

// éœ“è™¹å‘å…‰æ•ˆæœ
@mixin glow($color: color('primary'), $intensity: 20px) {
  box-shadow: 0 0 $intensity rgba($color, 0.5),
    0 0 ($intensity * 2) rgba($color, 0.3),
    0 0 ($intensity * 3) rgba($color, 0.1);
}

@mixin text-glow($color: color('primary')) {
  text-shadow: 0 0 10px rgba($color, 0.8), 0 0 20px rgba($color, 0.5),
    0 0 40px rgba($color, 0.3);
}

// å¹³æ»‘è¿‡æ¸¡
@mixin transition($properties: all, $duration: 250ms, $timing: ease) {
  transition-property: $properties;
  transition-duration: $duration;
  transition-timing-function: $timing;
}

// ç¡¬ä»¶åŠ é€Ÿ
@mixin gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
}

// éšè—æ»šåŠ¨æ¡
@mixin hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

// è‡ªå®šä¹‰æ»šåŠ¨æ¡
@mixin custom-scrollbar(
  $width: 8px,
  $track: color('dark-muted'),
  $thumb: color('primary')
) {
  &::-webkit-scrollbar {
    width: $width;
  }

  &::-webkit-scrollbar-track {
    background: $track;
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: $thumb;
    border-radius: 4px;

    &:hover {
      background: color.adjust($thumb, $lightness: 10%);
    }
  }
}

// ç»å¯¹å®šä½å±…ä¸­
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// ç»å¯¹å®šä½å¡«å……
@mixin absolute-fill {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

// å®‰å…¨åŒºåŸŸå†…è¾¹è·ï¼ˆç§»åŠ¨ç«¯åˆ˜æµ·å±é€‚é…ï¼‰
@mixin safe-area-padding {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
}

// æŒ‰é’®é‡ç½®
@mixin button-reset {
  appearance: none;
  border: none;
  background: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
  font: inherit;
  color: inherit;

  &:focus {
    outline: none;
  }
}

// ç„¦ç‚¹ç¯
@mixin focus-ring($color: color('primary'), $offset: 2px) {
  &:focus-visible {
    outline: 2px solid $color;
    outline-offset: $offset;
  }
}

// å“åº”å¼å®¹å™¨
@mixin container {
  width: 100%;
  max-width: $container-max-width;
  margin-inline: auto;
  padding-inline: $container-padding;
}

// ç½‘æ ¼èƒŒæ™¯
@mixin grid-background($size: 40px, $color: rgba(255, 255, 255, 0.03)) {
  background-image: linear-gradient($color 1px, transparent 1px),
    linear-gradient(90deg, $color 1px, transparent 1px);
  background-size: $size $size;
}

// ç‚¹é˜µèƒŒæ™¯
@mixin dot-pattern(
  $size: 20px,
  $dot-size: 1px,
  $color: rgba(255, 255, 255, 0.1)
) {
  background-image: radial-gradient(
    circle,
    $color $dot-size,
    transparent $dot-size
  );
  background-size: $size $size;
}
